# net-viewer
Инструмент мониторинга устройств в сети на основе SNMP


## Целевое назначение
Если у вас хоть раз возникал вопрос "в какой порт на коммутаторе воткнуто то или иное устройство ethernet", 
этот инструмент для вас.<br>
Инструмент имеет смысл, при наличии хотя бы одного коммутирующего устройства в локальной сети (свич), 
обладающего функциональность SNMP.<br>
Как правило, устройства уровня L3 - как раз, то что надо.<br>
Идея состоит в следующем: обнаружить, найти, показать устройства в локальной сети, 
выдать максимально возможную информацию о них,
и, главное, в какие порты они физически воткнуты.<br>
Например, для поиска где они есть. Или для построения VLAN. Или для инвентаризации, и т.д.

Для тестового запуска будет достаточно одного коммутатора с функциональностью SNMP и нескольких устройств в сети.


## С точки зрения безопасности
Задача вытащить сопоставление MACaddr-port вполне решаема на многих коммутаторах; 
достаточно доступа через SNMP к "public" community.
Для безопасности надо ограничить запросы с адреса хоста, где будет развернуто приложение.<br>
Задача получить подобный результат как `arp -a` на некоторых устройствах не тривиальна, 
а для некоторых, не выполнима. Разве что через доступ по ssh. 
Но этого мы делать не будем, слишком много вопросов появляется с точки зрения безопасности.<br>
Используем только SNMP, причем нарулить этот доступ необходимо самостоятельно. Несложно. 
Опять же, с вашими требованиями к безопасности устройств в вашей сети.


## Запуск

```
git clone https://github.com/AlexeiShigaev/net-viewer.git
cd net-viewer
docker compose up --build
```

## Возможные проблемы запуска
Сообщение при старте монго ```WARNING: MongoDB 5.0+ requires a CPU with AVX support, and your current system does not appear to have that!```
понижаем версию до ```image: mongo:4.4.18``` в docker-compose.yaml<br>
Или искать как включить AVX support. 


## Далее в браузере
Предполагается, что вы нарулили хотя бы одно устройство для запросов SNMP с хоста на котором развернули приложение.<br>
Идем в браузере по адресу ```http://host:8008/web/```. Логин admin, стартовый пароль admin. Сменить пароль возможность есть.<br>
Добавляем устройство.

Для тестирования API ```http://host:8008/docs``` (swagger)

Заглянуть в базу: ```http://host:8081/```


## Почистить после
Если хочется совсем все вычистить, включая скачанные образы контейнеров.
```
docker system prune -af
```

## Использованы технологии
FastAPI, MongoDB (с драйвером Motor), Pydantic, Jinja2Templates, Swagger,<br>
Визуализация в браузере с Bootstrap, управление через JavaScript<br>
Авторизация через JSON Web Token, передаем его в куки. В базе хэш пароля (HS256).<br>
Все это целиком завернуто в Docker.
